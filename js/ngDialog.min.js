/*! ng-dialog - v0.5.9 (https://github.com/likeastore/ngDialog) */
!function(a,b){"undefined"!=typeof module&&module.exports?(b("undefined"==typeof angular?require("angular"):angular),module.exports="ngDialog"):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){"use strict";var b=a.module("ngDialog",[]),c=a.element,d=a.isDefined,e=(document.body||document.documentElement).style,f=d(e.animation)||d(e.WebkitAnimation)||d(e.MozAnimation)||d(e.MsAnimation)||d(e.OAnimation),g="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",h="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",i="ngdialog-disabled-animation",j={html:!1,body:!1},k={},l={},m=[],n=!1,o=!1;return b.provider("ngDialog",function(){var b=this.defaults={className:"ngdialog-theme-default",appendClassName:"",disableAnimation:!1,plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,overlay:!0,cache:!0,trapFocus:!0,preserveFocus:!0,ariaAuto:!0,ariaRole:null,ariaLabelledById:null,ariaLabelledBySelector:null,ariaDescribedById:null,ariaDescribedBySelector:null,bodyClassName:"ngdialog-open"};this.setForceHtmlReload=function(a){j.html=a||!1},this.setForceBodyReload=function(a){j.body=a||!1},this.setDefaults=function(c){a.extend(b,c)},this.setOpenOnePerName=function(a){o=a||!1};var d,e=0,p=0,q={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(r,s,t,u,v,w,x,y,z,A){var B=[],C={onDocumentKeydown:function(a){27===a.keyCode&&D.close("$escape")},activate:function(a){var b=a.data("$ngDialogOptions");b.trapFocus&&(a.on("keydown",C.onTrapFocusKeydown),B.body.on("keydown",C.onTrapFocusKeydown))},deactivate:function(a){a.off("keydown",C.onTrapFocusKeydown),B.body.off("keydown",C.onTrapFocusKeydown)},deactivateAll:function(b){a.forEach(b,function(b){var c=a.element(b);C.deactivate(c)})},setBodyPadding:function(a){var b=parseInt(B.body.css("padding-right")||0,10);B.body.css("padding-right",b+a+"px"),B.body.data("ng-dialog-original-padding",b),w.$broadcast("ngDialog.setPadding",a)},resetBodyPadding:function(){var a=B.body.data("ng-dialog-original-padding");a?B.body.css("padding-right",a+"px"):B.body.css("padding-right",""),w.$broadcast("ngDialog.setPadding",0)},performCloseDialog:function(a,b){var c=a.data("$ngDialogOptions"),e=a.attr("id"),h=k[e];if(h){if("undefined"!=typeof y.Hammer){var i=h.hammerTime;i.off("tap",d),i.destroy&&i.destroy(),delete h.hammerTime}else a.unbind("click");1===p&&B.body.unbind("keydown",C.onDocumentKeydown),a.hasClass("ngdialog-closing")||(p-=1);var j=a.data("$ngDialogPreviousFocus");j&&j.focus&&j.focus(),w.$broadcast("ngDialog.closing",a,b),p=0>p?0:p,f&&!c.disableAnimation?(h.$destroy(),a.unbind(g).bind(g,function(){C.closeDialogElement(a,b)}).addClass("ngdialog-closing")):(h.$destroy(),C.closeDialogElement(a,b)),q[e]&&(q[e].resolve({id:e,value:b,$dialog:a,remainingDialogs:p}),delete q[e]),k[e]&&delete k[e],m.splice(m.indexOf(e),1),m.length||(B.body.unbind("keydown",C.onDocumentKeydown),n=!1)}},closeDialogElement:function(a,b){var c=a.data("$ngDialogOptions");a.remove(),0===p&&(B.html.removeClass(c.bodyClassName),B.body.removeClass(c.bodyClassName),C.resetBodyPadding()),w.$broadcast("ngDialog.closed",a,b)},closeDialog:function(b,c){var d=b.data("$ngDialogPreCloseCallback");if(d&&a.isFunction(d)){var e=d.call(b,c);a.isObject(e)?e.closePromise?e.closePromise.then(function(){C.performCloseDialog(b,c)}):e.then(function(){C.performCloseDialog(b,c)},function(){}):e!==!1&&C.performCloseDialog(b,c)}else C.performCloseDialog(b,c)},onTrapFocusKeydown:function(b){var c,d=a.element(b.currentTarget);if(d.hasClass("ngdialog"))c=d;else if(c=C.getActiveDialog(),null===c)return;var e=9===b.keyCode,f=b.shiftKey===!0;e&&C.handleTab(c,b,f)},handleTab:function(a,b,c){var d=C.getFocusableElements(a);if(0===d.length)return void(document.activeElement&&document.activeElement.blur());var e=document.activeElement,f=Array.prototype.indexOf.call(d,e),g=-1===f,h=0===f,i=f===d.length-1,j=!1;c?(g||h)&&(d[d.length-1].focus(),j=!0):(g||i)&&(d[0].focus(),j=!0),j&&(b.preventDefault(),b.stopPropagation())},autoFocus:function(a){var b=a[0],d=b.querySelector("*[autofocus]");if(null===d||(d.focus(),document.activeElement!==d)){var e=C.getFocusableElements(a);if(e.length>0)return void e[0].focus();var f=C.filterVisibleElements(b.querySelectorAll("h1,h2,h3,h4,h5,h6,p,span"));if(f.length>0){var g=f[0];c(g).attr("tabindex","-1").css("outline","0"),g.focus()}}},getFocusableElements:function(a){var b=a[0],c=b.querySelectorAll(h),d=C.filterTabbableElements(c);return C.filterVisibleElements(d)},filterTabbableElements:function(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];"-1"!==c(e).attr("tabindex")&&b.push(e)}return b},filterVisibleElements:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];(d.offsetWidth>0||d.offsetHeight>0)&&b.push(d)}return b},getActiveDialog:function(){var a=document.querySelectorAll(".ngdialog");return 0===a.length?null:c(a[a.length-1])},applyAriaAttributes:function(a,b){if(b.ariaAuto){if(!b.ariaRole){var c=C.getFocusableElements(a).length>0?"dialog":"alertdialog";b.ariaRole=c}b.ariaLabelledBySelector||(b.ariaLabelledBySelector="h1,h2,h3,h4,h5,h6"),b.ariaDescribedBySelector||(b.ariaDescribedBySelector="article,section,p")}b.ariaRole&&a.attr("role",b.ariaRole),C.applyAriaAttribute(a,"aria-labelledby",b.ariaLabelledById,b.ariaLabelledBySelector),C.applyAriaAttribute(a,"aria-describedby",b.ariaDescribedById,b.ariaDescribedBySelector)},applyAriaAttribute:function(a,b,d,e){if(d&&a.attr(b,d),e){var f=a.attr("id"),g=a[0].querySelector(e);if(!g)return;var h=f+"-"+b;return c(g).attr("id",h),a.attr(b,h),h}},setOptions:function(a,b){l[a]=b},getOptions:function(a){return l[a]},replacePane:function(b,d){for(var e=C.getActiveDialog(),f=e.children(),g=null,h=0,i=f.length;i>h;h++)if(c(f[h]).hasClass("ngdialog-content")){g=c(f[h]);break}var j=e.attr("id"),l=C.getOptions(j),m=k[j],n=(q[j],a.extend({},l.resolve));a.forEach(n,function(b,c){n[c]=a.isString(b)?A.get(b):A.invoke(b,null,null,c)}),u.all({template:C.loadTemplate(b,l.plain,l.cache),locals:u.all(n)}).then(function(a){var b=a.template;l.showClose&&(b+='<div class="ngdialog-close"></div>');var c=0,f=25,h=250,i=400;e.css("height",e[0].clientHeight+"px"),e[0].scrollHeight<=e[0].clientHeight&&e.css("overflow","hidden");var j=g.clone();j.css("visibility","hidden"),j.css("height",""),j.empty(),j.append(b),t(j.contents())(m),e.append(j),x(function(){var a=j[0].clientHeight;j.remove(),j=null,e.css("height",""),e.css("overflow","");var k=g[0].clientHeight;g.css("transition","none"),g.css("-webkit-transition","none"),g.css("-moz-transition","none"),g.css("-o-transition","none"),g.css("height",k+"px"),g[0].offsetHeight,g.css("transition",""),g.css("-webkit-transition",""),g.css("-moz-transition",""),g.css("-o-transition",""),x(function(){g.children().css("opacity",0)},c),c+=h+f,x(function(){g.empty(),g.append(b),g.children().css("opacity",0)},c),c+=h+f,x(function(){g.css("height",a+"px")},c),c+=i+f,x(function(){C.applyAriaAttributes(e,l),t(e)(m),g.css("height","")},c),c+=h+f,x(function(){g.children().css("opacity",1),w.$broadcast("ngDialog.paneLoaded",e,d)},c)})})},loadTemplateUrl:function(a,b){return w.$broadcast("ngDialog.templateLoading",a),v.get(a,b||{}).then(function(b){return w.$broadcast("ngDialog.templateLoaded",a),b.data||""})},loadTemplate:function(b,c,d){return b?a.isString(b)&&c?b:"boolean"!=typeof d||d?C.loadTemplateUrl(b,{cache:s}):C.loadTemplateUrl(b,{cache:!1}):"Empty template"},detectUIRouter:function(){try{return a.module("ui.router"),!0}catch(b){return!1}},getRouterLocationEventName:function(){return C.detectUIRouter()?"$stateChangeSuccess":"$locationChangeSuccess"}},D={__PRIVATE__:C,open:function(f){var g=null;if(f=f||{},!(o&&f.name&&(g=f.name+" dialog",this.isOpen(g)))){var h=a.copy(b),j=++e;g=g||"ngdialog"+j,m.push(g),"undefined"!=typeof h.data&&("undefined"==typeof f.data&&(f.data={}),f.data=a.merge(a.copy(h.data),f.data)),a.extend(h,f),C.setOptions(g,h);var l;q[g]=l=u.defer();var r;k[g]=r=a.isObject(h.scope)?h.scope.$new():w.$new();var s,v,E=a.extend({},h.resolve);return a.forEach(E,function(b,c){E[c]=a.isString(b)?A.get(b):A.invoke(b,null,null,c)}),u.all({template:C.loadTemplate(h.template||h.templateUrl,h.plain,h.cache),locals:u.all(E)}).then(function(b){var e=b.template,f=b.locals;h.showClose&&(e+='<div class="ngdialog-close"></div>');var j=h.overlay?"":" ngdialog-no-overlay";if(s=c('<div id="'+g+'" class="ngdialog'+j+'"></div>'),s.html(h.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content" role="document">'+e+"</div>":'<div class="ngdialog-content" role="document">'+e+"</div>"),s.data("$ngDialogOptions",h),r.ngDialogId=g,h.data&&a.isString(h.data)){var k=h.data.replace(/^\s*/,"")[0];r.ngDialogData="{"===k||"["===k?a.fromJson(h.data):new String(h.data),r.ngDialogData.ngDialogId=g}else h.data&&a.isObject(h.data)&&(r.ngDialogData=h.data,r.ngDialogData.ngDialogId=g);if(h.className&&s.addClass(h.className),h.appendClassName&&s.addClass(h.appendClassName),h.disableAnimation&&s.addClass(i),v=h.appendTo&&a.isString(h.appendTo)?a.element(document.querySelector(h.appendTo)):B.body,C.applyAriaAttributes(s,h),h.preCloseCallback){var l;a.isFunction(h.preCloseCallback)?l=h.preCloseCallback:a.isString(h.preCloseCallback)&&r&&(a.isFunction(r[h.preCloseCallback])?l=r[h.preCloseCallback]:r.$parent&&a.isFunction(r.$parent[h.preCloseCallback])?l=r.$parent[h.preCloseCallback]:w&&a.isFunction(w[h.preCloseCallback])&&(l=w[h.preCloseCallback])),l&&s.data("$ngDialogPreCloseCallback",l)}if(r.closeThisDialog=function(a){C.closeDialog(s,a)},r.loadPane=function(a){var b="";b="main"===a?h.template:h.panes[a],b&&C.replacePane(b,a)},h.controller&&(a.isString(h.controller)||a.isArray(h.controller)||a.isFunction(h.controller))){var m;h.controllerAs&&a.isString(h.controllerAs)&&(m=h.controllerAs);var o=z(h.controller,a.extend(f,{$scope:r,$element:s}),!0,m);h.bindToController&&a.extend(o.instance,{ngDialogId:r.ngDialogId,ngDialogData:r.ngDialogData,closeThisDialog:r.closeThisDialog}),s.data("$ngDialogControllerController",o())}if(x(function(){var a=document.querySelectorAll(".ngdialog");C.deactivateAll(a),t(s)(r);var b=y.innerWidth-B.body.prop("clientWidth");B.html.addClass(h.bodyClassName),B.body.addClass(h.bodyClassName);var c=b-(y.innerWidth-B.body.prop("clientWidth"));c>0&&C.setBodyPadding(c),v.append(s),C.activate(s),h.trapFocus&&C.autoFocus(s),h.name?w.$broadcast("ngDialog.opened",{dialog:s,name:h.name}):w.$broadcast("ngDialog.opened",s)}),n||(B.body.bind("keydown",C.onDocumentKeydown),n=!0),h.closeByNavigation){var q=C.getRouterLocationEventName();w.$on(q,function(){C.closeDialog(s)})}if(h.preserveFocus&&s.data("$ngDialogPreviousFocus",document.activeElement),d=function(a){var b=h.closeByDocument?c(a.target).hasClass("ngdialog-overlay"):!1,d=c(a.target).hasClass("ngdialog-close");(b||d)&&D.close(s.attr("id"),d?"$closeButton":"$document")},"undefined"!=typeof y.Hammer){var u=r.hammerTime=y.Hammer(s[0]);u.on("tap",d)}else s.bind("click",d);return p+=1,D}),{id:g,closePromise:l.promise,close:function(a){C.closeDialog(s,a)}}}},openConfirm:function(d){var e=u.defer(),f=a.copy(b);d=d||{},"undefined"!=typeof f.data&&("undefined"==typeof d.data&&(d.data={}),d.data=a.merge(a.copy(f.data),d.data)),a.extend(f,d),f.scope=a.isObject(f.scope)?f.scope.$new():w.$new(),f.scope.confirm=function(a){e.resolve(a);var b=c(document.getElementById(g.id));C.performCloseDialog(b,a)};var g=D.open(f);return g?(g.closePromise.then(function(a){return a?e.reject(a.value):e.reject()}),e.promise):void 0},isOpen:function(a){var b=c(document.getElementById(a));return b.length>0},close:function(a,b){var d=c(document.getElementById(a));if(d.length)C.closeDialog(d,b);else if("$escape"===a){var e=m[m.length-1];d=c(document.getElementById(e)),d.data("$ngDialogOptions").closeByEscape&&C.closeDialog(d,"$escape")}else D.closeAll(b);return D},closeAll:function(a){for(var b=document.querySelectorAll(".ngdialog"),d=b.length-1;d>=0;d--){var e=b[d];C.closeDialog(c(e),a)}},getOpenDialogs:function(){return m},getDefaults:function(){return b}};return a.forEach(["html","body"],function(a){if(B[a]=r.find(a),j[a]){var b=C.getRouterLocationEventName();w.$on(b,function(){B[a]=r.find(a)})}}),D}]}),b.directive("ngDialog",["ngDialog",function(b){return{restrict:"A",scope:{ngDialogScope:"="},link:function(c,d,e){d.on("click",function(d){d.preventDefault();var f=a.isDefined(c.ngDialogScope)?c.ngDialogScope:"noScope";a.isDefined(e.ngDialogClosePrevious)&&b.close(e.ngDialogClosePrevious);var g=b.getDefaults();b.open({template:e.ngDialog,className:e.ngDialogClass||g.className,appendClassName:e.ngDialogAppendClass,controller:e.ngDialogController,controllerAs:e.ngDialogControllerAs,bindToController:e.ngDialogBindToController,scope:f,data:e.ngDialogData,showClose:"false"===e.ngDialogShowClose?!1:"true"===e.ngDialogShowClose?!0:g.showClose,closeByDocument:"false"===e.ngDialogCloseByDocument?!1:"true"===e.ngDialogCloseByDocument?!0:g.closeByDocument,closeByEscape:"false"===e.ngDialogCloseByEscape?!1:"true"===e.ngDialogCloseByEscape?!0:g.closeByEscape,overlay:"false"===e.ngDialogOverlay?!1:"true"===e.ngDialogOverlay?!0:g.overlay,preCloseCallback:e.ngDialogPreCloseCallback||g.preCloseCallback,bodyClassName:e.ngDialogBodyClass||g.bodyClassName})})}}}]),b});